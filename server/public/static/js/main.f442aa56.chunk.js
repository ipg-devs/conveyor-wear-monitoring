(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a(193)},137:function(e,t,a){},138:function(e,t,a){},193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),l=(a(137),a(123)),c=a(40),s=a(36),u=(a(138),a(25)),m=a(231),d=a(92),p=a(251),g=a(234),f=a(198),h=a(35),b=a(13),v=a(115),E=a(116),x=a.n(E),y=a(49),O=a.n(y),j=new function e(t){var a=this;Object(v.a)(this,e),this.login=function(e,t){return a.api.post("/login",{username:e,password:t}).then(function(e){var t=e.data;if(t.error)throw t.error;return t})},this.logout=function(){return new Promise(function(e,t){return setTimeout(function(){localStorage.removeItem("token"),localStorage.removeItem("admin"),e()})})},this.getTableData=function(e){var t=O()(function(){return localStorage.getItem("token")}),n=Object(b.a)(t,2),r=n[0],o=n[1];return r?(localStorage.removeItem("token"),Promise.reject(r)):a.api.post("/api/bwms/",{ids:JSON.stringify(e)},{headers:{authorization:"bearer ".concat(o)}}).then(function(e){return e.data})},this.getAllUsers=function(){var e=O()(function(){return localStorage.getItem("token")}),t=Object(b.a)(e,2),n=t[0],r=t[1];return n?(localStorage.removeItem("token"),Promise.reject(n)):a.api.get("/api/user/",{headers:{authorization:"bearer ".concat(r)}}).then(function(e){return e.data})},this.createNewUser=function(e){var t=O()(function(){return localStorage.getItem("token")}),n=Object(b.a)(t,2),r=n[0],o=n[1];return r?(localStorage.removeItem("token"),Promise.reject(r)):a.api.post("/api/user/create",Object(h.a)({},e),{headers:{authorization:"bearer ".concat(o)}}).then(function(e){return e.data})},this.updateUserPassword=function(e){var t=e.username,n=e.newPassword,r=O()(function(){return localStorage.getItem("token")}),o=Object(b.a)(r,2),i=o[0],l=o[1];return i?(localStorage.removeItem("token"),Promise.reject(i)):a.api.post("/api/user/update-password",{username:t,newPassword:n},{headers:{authorization:"bearer ".concat(l)}}).then(function(e){return e.data})},this.getAllSites=function(){var e=O()(function(){return localStorage.getItem("token")}),t=Object(b.a)(e,2),n=t[0],r=t[1];return n?(localStorage.removeItem("token"),Promise.reject(n)):a.api.get("/api/site",{headers:{authorization:"bearer ".concat(r)}}).then(function(e){return e.data})},this.createNewSite=function(e){var t=O()(function(){return localStorage.getItem("token")}),n=Object(b.a)(t,2),r=n[0],o=n[1];return r?(localStorage.removeItem("token"),Promise.reject(r)):a.api.post("/api/site/create",Object(h.a)({},e),{headers:{authorization:"bearer ".concat(o)}}).then(function(e){return e.data})},console.log(t),this.api=x.a.create({baseURL:"".concat(t,"/")})}("https://ipg-app.herokuapp.com"),w=a(15),S=r.a.createContext();var C={loading:!1,loggingOut:!1,loggedIn:function(){var e=localStorage.getItem("token");return e||!1}(),loggedInUser:{admin:"lion"===localStorage.getItem("admin")},tableOrder:["timestamp","siteid","section","target","revolutions","hours","sixteenth","eigth","quarter","location","tracking","note","event"],tableColumns:["Timestamp","Site Id","Section","Target","Revolutions","Hours","1/16","1/8","1/4","Location","Tracking","Note","Event"],tableRows:[],users:[],sites:[]};function k(e,t){return Object(h.a)({},e,Object(w.a)({},t.field,t.payload))}function N(e){var t=Object(n.useReducer)(k,C),a=Object(b.a)(t,2),o={state:a[0],dispatch:a[1]};return r.a.createElement(S.Provider,{value:o},e.children)}var A=a(77),I=a.n(A),T=a(250),P=a(230),B=a(96),D=Object(B.a)(function(e){return{spinner:{margin:"auto"},loadingModal:{margin:"100px auto",padding:"32px",textAlign:"center",maxWidth:"20%"},loadingCard:{textAlign:"center",margin:"auto",maxWidth:"20%",padding:16},loadingLabel:{marginTop:32,color:"#015f92",fontWeight:900}}}),W=function(e){var t=e.open,a=e.label,n=D();return r.a.createElement(T.a,{open:t},r.a.createElement(P.a,{className:n.loadingModal},r.a.createElement(I.a,{type:"spinningBubbles",color:"#0288d1",height:"50%",width:"50%",className:n.spinner}),r.a.createElement("div",{className:n.loadingLabel},a||"LOADING")))},L=function(e){var t=e.label,a=(e.height,e.width,D());return r.a.createElement("div",{className:a.loadingCard},r.a.createElement(I.a,{type:"spinningBubbles",color:"#0288d1",height:"100%",width:"100%"}),r.a.createElement("div",{className:a.loadingLabel},t||"LOADING"))},R=Object(f.a)(function(e){return{login:{display:"flex",flexDirection:"column",maxWidth:500,margin:"0 auto"},loginBox:{marginTop:128,padding:16},loginBtn:{marginTop:16}}});var U=Object(u.withSnackbar)(function(e){var t=R(),a=Object(n.useContext)(S),o=a.state,i=a.dispatch,l=Object(n.useRef)(""),c=Object(n.useRef)(""),s=o.loading;return r.a.createElement(m.a,{className:t.login},r.a.createElement(d.a,{className:t.loginBox},s?r.a.createElement(L,null):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",null,r.a.createElement(p.a,{id:"username",label:"Username",margin:"normal",inputRef:l,variant:"outlined"}),r.a.createElement(p.a,{id:"password-input",label:"Password",className:t.textField,type:"password",autoComplete:"current-password",margin:"normal",variant:"outlined",inputRef:c}))),r.a.createElement(g.a,{variant:"contained",color:"primary",disabled:!!s,className:t.loginBtn,onClick:function(t){return function(t){t.preventDefault(),i({field:"loading",payload:!0}),j.login(l.current.value,c.current.value).then(function(t){return e.enqueueSnackbar("Successful login!",{variant:"success"}),t}).then(function(e){var t=e.token,a=e.user;localStorage.setItem("token",t),localStorage.setItem("admin",a.admin?"lion":"cheese"),i({field:"loggedIn",payload:t}),i({field:"loggedInUser",payload:a})}).then(function(){return e.history.push("/dashboard")}).catch(function(t){console.log("Error logging in: ".concat(t)),e.enqueueSnackbar("Error logging in.",{variant:"error"}),i({field:"loading",payload:!1})})}(t)}},"Login")))}),F=a(86),M=a.n(F),z=a(117),q=a(87),H=a(235),_=a(236),G=a(237),J=a(238),V=a(239),Y=a(45),X=a(46),$={green:"#26ab26",red:"#d1392e",yellow:"#d1d12e"};function K(){var e=Object(Y.a)(["\n  height: 20px;\n  width: 20px;\n  border-radius: 50%;\n  background-color: ",";\n"]);return K=function(){return e},e}var Q=X.a.div(K(),function(e){return $[e.value]}),Z=function(e){var t=e.value;return r.a.createElement(Q,{value:t})};function ee(){var e=Object(Y.a)(["\n  flex-grow: 1;\n  height: 20px;\n  background-color: ",";\n"]);return ee=function(){return e},e}function te(){var e=Object(Y.a)(["\n  display: flex;\n  width: 240px;\n"]);return te=function(){return e},e}var ae=X.a.div(te()),ne=X.a.div(ee(),function(e){return $[e.value]}),re=function(e){var t=e.values;return t?r.a.createElement(ae,null,t.map(function(e,t){return r.a.createElement(ne,{key:t,value:e})})):r.a.createElement("div",null,"ERROR")},oe=a(120),ie=function(e){var t=e.value;return r.a.createElement("span",null,oe(t).add(6,"hours").format("MM/DD/YYYY hh:mm:ss"))},le=["sixteenth","eigth","quarter"],ce=function(e){var t=e.variant,a=e.value;return"location"===t||"Location"===t?r.a.createElement(re,{values:a}):le.includes(t)?r.a.createElement(Z,{value:a}):"timestamp"===t?r.a.createElement(ie,{value:a}):r.a.createElement("span",null,a)},se=Object(B.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650}}}),ue=Object(u.withSnackbar)(Object(s.f)(function(e){var t=e.history,a=e.enqueueSnackbar,o=Object(n.useContext)(S),i=o.state,l=o.dispatch,c=i.tableRows,s=i.tableColumns,u=i.tableOrder,p=i.loading,g=i.loggingOut,f=i.loggedInUser;Object(n.useEffect)(function(){if(g)return t.push("/");l({field:"loading",payload:!0}),j.getTableData(f.site_id).then(function(){var e=Object(z.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({field:"tableRows",payload:t});case 2:return e.next=4,l({field:"loading",payload:!1});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){a("Session Timed Out",{variant:"error",preventDuplicate:!0}),t.push("/"),l({field:"loggedIn",payload:null}),l({field:"loading",payload:!1})})},[]);var h=se();return r.a.createElement(m.a,{style:{maxWidth:1500,padding:16,margin:"0 auto"}},r.a.createElement(W,{open:p}),r.a.createElement(d.a,{className:h.root},r.a.createElement(H.a,{className:h.table},r.a.createElement(_.a,null,r.a.createElement(G.a,null,s.map(function(e){return r.a.createElement(J.a,{key:e},le.includes(e)?e:Object(q.titleCase)(Object(q.sentenceCase)(e)))}))),r.a.createElement(V.a,null,c.map(function(e,t){return r.a.createElement(G.a,{key:t},u.map(function(a){return r.a.createElement(J.a,{key:"".concat(a).concat(t)},r.a.createElement(ce,{variant:a,value:e[a]}))}))})))))})),me=a(75),de=a.n(me),pe=a(74),ge=a.n(pe),fe=a(252),he=a(244),be=a(127),ve=a(245),Ee=a(240),xe=a(50),ye=a(241),Oe=a(242),je=a(233),we=a(255),Se=a(248),Ce=a(232),ke=a(254),Ne=a(253),Ae=a(243),Ie=a(249),Te={PaperProps:{style:{maxHeight:224,width:250}}},Pe=Object(B.a)(function(e){return{modalTitle:{paddingLeft:16},container:{display:"flex",flexDirection:"column"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},formControl:{minWidth:300,maxWidth:500,marginLeft:16},formGroup:{marginTop:8},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},menu:{width:200},adminCheckbox:{marginLeft:32},submitButton:{marginTop:32,marginLeft:"auto"}}}),Be=function(e){var t=e.toggleAddModal,a=Object(n.useContext)(S),o=a.state,i=a.dispatch,l=o.sites,c=Pe(),s=Object(xe.a)(),u=Object(n.useState)([]),m=Object(b.a)(u,2),d=m[0],f=m[1],v=Object(n.useState)(!1),E=Object(b.a)(v,2),x=E[0],y=E[1],O=Object(n.useState)({username:"",email:"",password:""}),C=Object(b.a)(O,2),k=C[0],N=C[1];Object(n.useEffect)(function(){j.getAllSites().then(function(e){return i({field:"sites",payload:e})})},[]);var A=function(e){return function(t){N(Object(h.a)({},k,Object(w.a)({},e,t.target.value)))}};function I(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}return r.a.createElement("div",{style:{maxWidth:800}},r.a.createElement("form",{className:c.container,noValidate:!0,autoComplete:"off"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"}},r.a.createElement(be.a,{variant:"h5",color:"primary",className:c.modalTitle},"Create User"),r.a.createElement(Ee.a,{color:"secondary","aria-label":"Close",onClick:function(){return t(!1)}},r.a.createElement(ye.a,null,"close_icon"))),r.a.createElement(p.a,{id:"outlined-name",label:"Username",className:c.textField,value:k.Username,onChange:A("username"),margin:"normal",variant:"outlined",placeholder:"John Doe"}),r.a.createElement(p.a,{id:"outlined-email-input",label:"Email",className:c.textField,onChange:A("email"),type:"email",name:"email",autoComplete:"email",margin:"normal",variant:"outlined"}),r.a.createElement(p.a,{id:"outlined-password-input",label:"Password",className:c.textField,onChange:A("password"),type:"password",margin:"normal",variant:"outlined"}),r.a.createElement(Oe.a,{row:!0,className:c.formGroup},r.a.createElement(je.a,{className:c.formControl},r.a.createElement(we.a,{htmlFor:"select-sites-chip"},"Sites"),r.a.createElement(Se.a,{multiple:!0,value:d,onChange:function(e){f(e.target.value)},input:r.a.createElement(Ce.a,{id:"select-sites-chip"}),renderValue:function(e){return r.a.createElement("div",{className:c.chips},e.map(function(e){return r.a.createElement(ke.a,{key:e,label:e,className:c.chip})}))},MenuProps:Te},l.map(function(e){var t=e.name;return r.a.createElement(Ne.a,{key:t,value:t,style:I(t,d,s)},t)}))),r.a.createElement(Ae.a,{value:k.admin,control:r.a.createElement(Ie.a,{color:"primary"}),onChange:function(e){return y(!x)},label:"Admin",labelPlacement:"start",style:{marginTop:12,marginLeft:"auto",marginRight:16}})),r.a.createElement(g.a,{className:c.submitButton,color:"primary",variant:"contained",onClick:function(){return function(){var e=l.reduce(function(e,t){return d.includes(t.name)&&e.push(t.id),e},[]);return j.createNewUser(Object(h.a)({},k,{admin:x,site_id:e})).then(function(e){return i({field:"users",payload:e})}).then(function(){return t(!1)}).catch(console.log)}()}},"Submit")))},De=Object(B.a)(function(e){return{modalTitle:{paddingLeft:16},container:{display:"flex",flexDirection:"column"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},submitButton:{marginTop:32,marginLeft:"auto"}}}),We=Object(u.withSnackbar)(function(e){var t=e.togglePasswordModal,a=e.username,o=e.enqueueSnackbar,i=Object(n.useState)(),l=Object(b.a)(i,2),c=l[0],s=l[1],u=De();return r.a.createElement("div",{style:{maxWidth:800}},r.a.createElement("form",{className:u.container,noValidate:!0,autoComplete:"off"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:16}},r.a.createElement(be.a,{variant:"h5",color:"primary",className:u.modalTitle},"New Password for ",a||"no User ID"),r.a.createElement(Ee.a,{color:"secondary","aria-label":"Close",onClick:function(){return t(!1)}},r.a.createElement(ye.a,null,"close_icon"))),r.a.createElement(p.a,{id:"outlined-password-input",label:"New Password",className:u.textField,onChange:function(e){s(e.target.value)},type:"password",margin:"normal",variant:"outlined"}),r.a.createElement(g.a,{className:u.submitButton,color:"primary",variant:"contained",onClick:function(){c?j.updateUserPassword({username:a,newPassword:c}).then(function(){return t(!1)}).catch(function(e){console.log(e),o("Error Changing Password",{variant:"error",preventDuplicate:!0})}):o("Password CANNOT be Empty",{variant:"error",preventDuplicate:!0})}},"Submit")))}),Le=Object(B.a)(function(e){var t;return{root:{width:"100%",textAlign:"left",position:"relative"},fab:{position:"absolute",top:e.spacing(2),right:e.spacing(2)},heading:{flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},modalBg:(t={maxWidth:"500px",margin:"auto"},Object(w.a)(t,e.breakpoints.down("sm"),{marginTop:"16px"}),Object(w.a)(t,e.breakpoints.up("md"),{marginTop:"50px"}),Object(w.a)(t,e.breakpoints.up("lg"),{marginTop:"100px"}),Object(w.a)(t,"padding","32px"),t),modalFAB:{position:"absolute",top:e.spacing(1),right:e.spacing(1)}}}),Re=Object(u.withSnackbar)(Object(s.f)(function(e){e.enqueueSnackbar,e.history;var t=Object(n.useContext)(S).state,a=t.users,o=t.sites,i=Object(n.useState)(!1),l=Object(b.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),h=Object(b.a)(f,2),v=h[0],E=h[1],x=Le(),y=function(e){return p(e)},O=function(e){return E(e)};return r.a.createElement("div",{className:x.root},r.a.createElement("h1",null,"Users"),a.map(function(e){return r.a.createElement(fe.a,{key:e.id,expanded:c===e.username,onChange:(t=e.username,function(e,a){s(!!a&&t)})},r.a.createElement(he.a,{expandIcon:r.a.createElement(ge.a,null),"aria-controls":"panel".concat(e.id,"bh-content"),id:"panel".concat(e.id,"bh-header")},r.a.createElement(be.a,{variant:"h6",className:x.heading},e.username),r.a.createElement(be.a,{className:x.secondaryHeading},e.admin?"Admin":"")),r.a.createElement(ve.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(be.a,null,"sites:"," ",o.reduce(function(t,a){return e.site_id.includes(a.id)&&t.push(a.name),t},[]).join(", ")),r.a.createElement(be.a,null,"email: ",e.email),r.a.createElement(g.a,{variant:"outlined",color:"primary",style:{width:"200px",marginTop:"16px",marginLeft:"auto"},onClick:function(){return O(!0)}},"Change Password")));var t}),r.a.createElement(Ee.a,{color:"primary","aria-label":"Add",className:x.fab,onClick:function(){return y(!0)}},r.a.createElement(de.a,null)),r.a.createElement(T.a,{open:d},r.a.createElement(P.a,{className:x.modalBg},r.a.createElement(Be,{toggleAddModal:function(e){return y(e)}}))),r.a.createElement(T.a,{open:v},r.a.createElement(P.a,{className:x.modalBg},r.a.createElement(We,{username:c,togglePasswordModal:function(e){return O(e)}}))))})),Ue=function(e){var t=e.contact,a=t.person,n=t.address,o=t.phone,i=t.email;return r.a.createElement("div",null,r.a.createElement(be.a,null,a),r.a.createElement(be.a,null,o),r.a.createElement(be.a,null,i),r.a.createElement(be.a,null,n.street),r.a.createElement(be.a,null,n.cityAndState))},Fe=Object(B.a)(function(e){return{modalTitle:{paddingLeft:16},container:{display:"flex",flexDirection:"column"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},formControl:{minWidth:300,maxWidth:500,marginLeft:16},formGroup:{marginTop:8},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},menu:{width:200},adminCheckbox:{marginLeft:32},submitButton:{marginTop:32,marginLeft:"auto"}}}),Me=function(e){var t=e.toggleAddModal,a=Object(n.useContext)(S).dispatch,o=Fe(),i=Object(n.useState)({sitename:"",siteContactName:"",siteContactPhone:"",siteStreetAddress:"",sitesCityAndStateAddress:""}),l=Object(b.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)(function(){j.getAllSites().then(function(e){return a({field:"sites",payload:e})})},[]);var u=function(e){return function(t){s(Object(h.a)({},c,Object(w.a)({},e,t.target.value)))}};return r.a.createElement("div",{style:{maxWidth:800}},r.a.createElement("form",{className:o.container,noValidate:!0,autoComplete:"off"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"}},r.a.createElement(be.a,{variant:"h5",color:"primary",className:o.modalTitle},"Create Site"),r.a.createElement(Ee.a,{color:"secondary","aria-label":"Close",onClick:function(){return t(!1)}},r.a.createElement(ye.a,null,"close_icon"))),r.a.createElement(p.a,{id:"outlined-site-name",label:"Site Name",className:o.textField,value:c.sitename,onChange:u("sitename"),margin:"normal",variant:"outlined"}),r.a.createElement(be.a,{variant:"h6",color:"primary",className:o.modalTitle},"Contact"),r.a.createElement(p.a,{id:"outlined-site-contact-name",label:"Site Contact Name",className:o.textField,value:c.siteContactName,onChange:u("siteContactName"),margin:"normal",variant:"outlined"}),r.a.createElement(p.a,{id:"outlined-site-contact-Phone",label:"Site Contact Phone",className:o.textField,value:c.siteContactPhone,onChange:u("siteContactPhone"),margin:"normal",variant:"outlined"}),r.a.createElement(p.a,{id:"outlined-site-street-address",label:"Site Street address",className:o.textField,value:c.siteStreetAddress,onChange:u("siteStreetAddress"),margin:"normal",variant:"outlined"}),r.a.createElement(p.a,{id:"outlined-site-city-and-state-address",label:"Site City And State",className:o.textField,value:c.sitesCityAndStateAddress,onChange:u("sitesCityAndStateAddress"),margin:"normal",variant:"outlined"}),r.a.createElement(g.a,{className:o.submitButton,color:"primary",variant:"contained",onClick:function(){return function(){var e=c.sitename,a=c.siteContactName,n=c.siteContactPhone,r=c.siteStreetAddress,o=c.sitesCityAndStateAddress;return j.createNewSite({name:e,contact:{person:a,phone:n,address:{street:r,cityAndState:o}}}).then(console.log).then(function(){return t(!1)}).catch(console.log)}()}},"Submit")))},ze=Object(B.a)(function(e){var t;return{root:{width:"100%",textAlign:"left",position:"relative"},fab:{position:"absolute",top:e.spacing(2),right:e.spacing(2)},heading:{flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},modalBg:(t={maxWidth:"500px",margin:"auto"},Object(w.a)(t,e.breakpoints.down("sm"),{marginTop:"16px"}),Object(w.a)(t,e.breakpoints.up("md"),{marginTop:"50px"}),Object(w.a)(t,e.breakpoints.up("lg"),{marginTop:"100px"}),Object(w.a)(t,"padding","32px"),t),modalFAB:{position:"absolute",top:e.spacing(1),right:e.spacing(1)}}}),qe=function(){var e=Object(n.useContext)(S).state.sites,t=ze(),a=Object(n.useState)("0"),o=Object(b.a)(a,2),i=o[0],l=o[1],c=Object(n.useState)(!1),s=Object(b.a)(c,2),u=s[0],m=s[1];return r.a.createElement("div",{className:t.root},r.a.createElement("h1",null,"Sites"),e.map(function(e){return r.a.createElement(fe.a,{key:e.id,expanded:i===e.id,onChange:(a=e.id,function(e,t){l(!!t&&a)})},r.a.createElement(he.a,{expandIcon:r.a.createElement(ge.a,null),"aria-controls":"panel".concat(e.id,"bh-content"),id:"panel".concat(e.id,"bh-header")},r.a.createElement(be.a,{variant:"h6",className:t.heading},e.name," - ",e.id)),r.a.createElement(ve.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(Ue,{contact:e.contact}),r.a.createElement(be.a,null,"date created: ",r.a.createElement(ie,null,e.createdDate))));var a}),r.a.createElement(Ee.a,{color:"primary","aria-label":"Add Site",className:t.fab,onClick:function(){return m(!0)}},r.a.createElement(de.a,null)),r.a.createElement(T.a,{open:u},r.a.createElement(P.a,{className:t.modalBg},r.a.createElement(Me,{toggleAddModal:function(e){return m(e)}}))))},He=Object(B.a)(function(e){return{button:{width:"100%",marginBottom:"8px"},root:{display:"flex"},links:{textDecoration:"none"},linklist:{minWidth:"100px"}}}),_e=Object(u.withSnackbar)(Object(s.f)(function(e){var t=e.history,a=e.enqueueSnackbar,o=Object(n.useContext)(S),i=o.state,l=o.dispatch,c=i.loading,s=He(),u=Object(n.useState)("users"),d=Object(b.a)(u,2),p=d[0],f=d[1];Object(n.useEffect)(function(){l({field:"loading",payload:!0}),Promise.all([j.getAllUsers(),j.getAllSites()]).then(function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];l({field:"users",payload:a}),l({field:"sites",payload:n})}).then(function(){l({field:"loading",payload:!1})}).catch(function(){t.push("/"),a("Session Timed Out",{variant:"error",preventDuplicate:!0})})},[]);var h=function(e,t){e.preventDefault(),f(t)};return r.a.createElement(m.a,{style:{maxWidth:1600,minHeight:800,padding:16,margin:"0 auto"},className:s.root},r.a.createElement(W,{open:c}),r.a.createElement(m.a,{style:{maxWidth:"200px",display:"flex",flexDirection:"column",padding:"81px 0px 0px 0px",margin:"0px 16px 0px 0px"}},r.a.createElement(g.a,{color:"primary",variant:"users"===p?"contained":"outlined",className:s.button,onClick:function(e){return h(e,"users")}},"Users"),r.a.createElement(g.a,{color:"primary",variant:"sites"===p?"contained":"outlined",className:s.button,onClick:function(e){return h(e,"sites")}},"Sites")),"users"===p?r.a.createElement(Re,null):r.a.createElement(qe,null))})),Ge=a(228),Je=a(63),Ve=Object(Je.a)({palette:{primary:{light:"#349fda",main:"#0288d1",dark:"#015f92",contrastText:"#eee"},secondary:{light:"#f6685e",main:"#f44336",dark:"#aa2e25",contrastText:"#eee"}}}),Ye=a(246),Xe=a(247),$e=Object(s.f)(function(e){var t=Object(n.useContext)(S).dispatch;return r.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:function(e){e.preventDefault(),j.logout().then(function(){return t({field:"loggedIn",payload:!1})})}},"Logout")});function Ke(){var e=Object(Y.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return Ke=function(){return e},e}var Qe=X.a.div(Ke()),Ze=Object(B.a)(function(e){return{links:{textDecoration:"none",paddingRight:"8px"},button:{margin:e.spacing(1)}}});function et(){var e=Ze(),t=Object(n.useContext)(S).state.loggedInUser;return r.a.createElement(Qe,null,r.a.createElement(c.b,{to:"/dashboard",className:e.links},r.a.createElement(g.a,{color:"primary",className:e.button},"BWMS Dashboard")),t.admin?r.a.createElement(c.b,{to:"/admin",className:e.links},r.a.createElement(g.a,{color:"primary",className:e.button},"admin")):"",r.a.createElement($e,null))}var tt=Object(B.a)(function(e){return{topBar:{display:"flex",justifyContent:"space-between"},links:{textDecoration:"none"}}});var at=function(){var e=Object(n.useContext)(S).state,t=e.loggedIn,a=e.loggedInUser,o=tt();return r.a.createElement("div",{className:o.root},r.a.createElement(Ye.a,{position:"static",color:"default"},r.a.createElement(Xe.a,{className:o.topBar},r.a.createElement(be.a,{variant:"h6",color:"primary"},t?a.username:"BWMS Dashboard"),t?r.a.createElement(et,null):"")))};function nt(e){var t=e.component,a=Object(l.a)(e,["component"]),o=Object(n.useContext)(S).state.loggedIn;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return o?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/",state:{from:e.location}}})}}))}var rt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(N,null,r.a.createElement(Ge.a,{theme:Ve},r.a.createElement(c.a,null,r.a.createElement(at,null),r.a.createElement(u.SnackbarProvider,{autoHideDuration:3e3,maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(s.b,{path:"/",exact:!0,component:U}),r.a.createElement(nt,{path:"/dashboard",component:ue}),r.a.createElement(nt,{path:"/admin",component:_e}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[132,1,2]]]);
//# sourceMappingURL=main.f442aa56.chunk.js.map